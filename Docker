Для выполнения данной задачи на Альт Линукс, следуйте инструкциям ниже:

### Шаг 1: Установка Docker и Docker Compose

1. **Установите Docker:**

   ```bash
   sudo apt update
   sudo apt install docker.io
   sudo systemctl start docker
   sudo systemctl enable docker
   ```

2. **Установите Docker Compose:**

   ```bash
   sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
   sudo chmod +x /usr/local/bin/docker-compose
   ```

### Шаг 2: Создание файла `wiki.yml`

Создайте файл `wiki.yml` в домашней директории пользователя:

```bash
nano ~/wiki.yml
```

Вставьте в файл следующий контент:

```yaml
version: '3.1'

services:
  db:
    image: mysql:5.7
    container_name: db
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: mediawiki
      MYSQL_USER: wiki
      MYSQL_PASSWORD: DEP@ssw0rd
    volumes:
      - dbvolume:/var/lib/mysql

  wiki:
    image: mediawiki
    container_name: wiki
    restart: always
    ports:
      - 8080:80
    volumes:
      - ~/LocalSettings.php:/var/www/html/LocalSettings.php
    environment:
      - MEDIAWIKI_DB_HOST=db
      - MEDIAWIKI_DB_USER=wiki
      - MEDIAWIKI_DB_PASSWORD=DEP@ssw0rd
      - MEDIAWIKI_DB_NAME=mediawiki

volumes:
  dbvolume:
```

### Шаг 3: Создание файла `LocalSettings.php`

Создайте файл `LocalSettings.php` в домашней директории пользователя:

```bash
nano ~/LocalSettings.php
```

Вставьте в файл настройки, соответствующие вашей установке MediaWiki. Пример:

```php
<?php
# This file was automatically generated by the MediaWiki 1.35.0
# installer. If you make manual changes, please keep track in case you
# need to recreate them later.

$wgDBtype = "mysql";
$wgDBserver = "db";
$wgDBname = "mediawiki";
$wgDBuser = "wiki";
$wgDBpassword = "DEP@ssw0rd";

$wgSitename = "MyWiki";
$wgScriptPath = "";
$wgArticlePath = "/$1";
$wgUsePathInfo = true;

$wgServer = "http://localhost:8080";
```

### Шаг 4: Запуск Docker Compose

Перейдите в домашнюю директорию и запустите `docker-compose`:

```bash
cd ~
docker-compose -f wiki.yml up -d
```

### Шаг 5: Доступ к MediaWiki

Теперь MediaWiki должна быть доступна извне через порт 8080. Откройте браузер и перейдите по адресу:

```
http://<IP-адрес-сервера>:8080
```

Здесь `<IP-адрес-сервера>` замените на IP-адрес вашего сервера HQ-SRV.

### Примечание

Убедитесь, что файрволл сервера разрешает входящие подключения на порт 8080. Если необходимо, настройте правила файрволла:

```bash
sudo ufw allow 8080
```

Теперь ваш сервис MediaWiki должен быть успешно запущен и доступен через Docker на сервере HQ-SRV.
